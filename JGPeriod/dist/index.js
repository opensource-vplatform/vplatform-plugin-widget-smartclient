!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";isc.ClassFactory.defineClass("JGPeriod","JGBaseFormWidget"),isc.JGPeriod.addProperties({IsMust:!1,TextLength:50,Visible:!0,ReadOnly:!1,Enabled:!0,LabelTextAlign:"center",listener:["change","focus","blur","keydown","click","titleClick"],ColumnName:"",TitleWidth:94,DisplayFormatString:{year:"yyyy年",halfyear:"yyyy年bb半年",quarter:"yyyy年qq季",month:"yyyy年MM月",tendays:"yyyy年MM月xx旬",week:"yyyy年ww周"},PeriodType:"year",WidgetStyle:"JGDateItem"}),isc.JGPeriod.addMethods({_initProperties:function(e){this.TitleWidth=e.LabelWidth,this.TitleVisible=e.LabelVisible,this.styleName="JGBaseFormWidget JGPeriod",this.ReadOnly&&(this.styleName+=" JGPeriodReadOnly"),this.Enabled||(this.styleName+=" JGPeriodDisabled"),"JGPeriod"==this.WidgetStyle&&(this.WidgetStyle="JGFormIcon"),this.items=[isc.addProperties(e,{type:"V3PeriodItem",isAbsoluteForm:!0})],this._initEventAndDataBind()},_initEventAndDataBind:function(){var e=this;isc.WidgetDatasource.addBindDatasourceCurrentRecordUpdateEventHandler(e,null,null,(function(t){isc.DataBindingUtil.setWidgetValue(e,t)})),isc.WidgetDatasource.addBindDatasourceCurrentRecordClearEventHandler(e,null,null,(function(){isc.DataBindingUtil.clearWidgetValue(e)})),isc.DatasourceUtil.addDatasourceLoadEventHandler(this,this.OnValueLoaded),isc.DatasourceUtil.addDatasourceFieldUpdateEventHandler(this,null,this.OnValueChanged)},getBindFields:function(){return[this.ColumnName]},setPeriodType:function(e){if(!this.isDisabled()&&this.PeriodType!=e){this.PeriodType=e;var t=this.items.last();if(t){var i=this.ColumnName,a=this.getValues();for(var s in a)s===i&&(a[s]="");this.setValues(a),t.sdatetype=e,t.sdatetype_real=e,t.displayFormat=t._displayFormat[e],t.picker=null,t.form._dataSyn(this.code)}}},getPeriodType:function(){return this.items[0].sdatetype},setV3PeriodType:function(e){this.isDisabled()||this.setPeriodType(e)},getV3MethodMap:function(){var e=this.Super("getV3MethodMap",arguments);return e.setPeriodType="setV3PeriodType",e}})}));
